<template>
  <div class="filter-bar ui basic segment grid">
    <div class="ui form mb-2 mt-3">
      <div class="inline field">
        <label class="mr-2">Filtrar por:</label>
        <input type="text" v-model="filterText" @keyup.enter="doFilter">
        <button class="ml-1 btn btn-secondary" @click="doFilter">Filtrar</button>
        <button class="ml-1 btn btn-outline-secondary" @click="resetFilter">Cancelar filtrado</button>
        <a href="#" data-toggle="collapse" data-target="#filter-options" class="pl-4"><i class="fas fa-filter"></i> Más opciones</a>
      </div>
      <div id="filter-options" class="collapse">
        <option-line id="fEntrada" :isMultiple="false" :options="['Hoy', 'Esta semana', 'Últimos 7 días', 'Últimos 15 días', 'Últimos 30 días', 'Este mes']" description="Fecha entrada: " ref="fEntrada">
        </option-line>
        <option-line id="fPrevista" :isMultiple="false" :options="['Hoy', 'Esta semana', 'Últimos 7 días', 'Últimos 15 días', 'Últimos 30 días', 'Este mes', 'Ninguna']" description="Fecha prevista: " ref="fPrevista">
        </option-line>
        <option-line id="fSalida" :isMultiple="false" :options="['Hoy', 'Esta semana', 'Últimos 7 días', 'Últimos 15 días', 'Últimos 30 días', 'Este mes', 'Ninguna']" description="Fecha salida: " ref="fSalida">
        </option-line>
        <option-line id="tipo" :isMultiple="true" :options="['Fija', 'Resina', 'Ortodoncia', 'Esquelético', 'Zirconio', 'Compostura', 'Implante']" description="Tipo: " ref="tipo">
        </option-line>
      </div>
    </div>
  </div>
</template>

<script>
import optionButton from './optionButton'
import optionLine from './optionLine'

export default {
  name: 'workFilterBar',
  components: {
    optionButton,
    optionLine
  },
  data () {
    return {
      filterText: ''
    }
  },
  methods: {
    doFilter () {
      console.log(this.$refs.fSalida.getSelected())
      this.$parent.applyFilter(this.filterText, this.$refs.fEntrada.getSelected(),
      this.$refs.fPrevista.getSelected(),
      this.$refs.fSalida.getSelected(),
      this.$refs.tipo.getSelected())
    },
    resetFilter () {
      this.filterText = ''
      this.$refs.fEntrada.clear()
      this.$refs.fPrevista.clear()
      this.$refs.fSalida.clear()
      this.$refs.tipo.clear()
      this.$parent.applyFilter(this.filterText)
    }
  }
}
</script>